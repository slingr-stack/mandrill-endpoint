{
    "label": "Mandrill",
    "name": "mandrill",
    "apiVersion": "v1",
    "internal": false,
    "configurationType": "GLOBAL",
    "deployment": {
        "profiles":[
            {
                "name": "default",
                "label": "Default",
                "memory": 384,
                "offHeapMinFactor": 1.5,
                "description": "Default configuration"
            },
            {
                "name": "bigfiles",
                "label": "Big Files",
                "memory": 1024,
                "description": "Use this configuration if you want to receive big files as response to emails"
            }
        ],
        "allowMultipleInstances": false
    },
    "icon48": "https://storage.googleapis.com/static.slingrs.io/platform/endpoints/mandrill.png",
    "status": "ACTIVE",
    "events": [
        {
            "label": "Webhooks",
            "name": "webhooks",
            "description": "Event thrown when a webhook from mandrill arrives to the endpoint."
        }
    ],
    "functions": [
        {
            "label": "POST",
            "name": "_post"
        },
        {
            "label": "Convert date to time",
            "name": "_convertDateToTimestamp"
        },
        {
            "label": "Format from milliseconds",
            "name": "_formatFromMillis"
        },
        {
            "label": "Get Base64 encoding by fileId",
            "name": "_fileIdToBase64"
        }
    ],
    "scripts": [
        "functions.js",
        "http-generic-helpers.js",
        "mandrill-helpers.js"
    ],
    "configuration": [
        {
            "name": "apiKey",
            "label": "API key",
            "description": "API key",
            "type": "text",
            "required": true
        },
        {
            "name": "fromName",
            "label": "Sender name",
            "description": "Name of the sender of the emails",
            "type": "text",
            "required": true
        },
        {
            "name": "account",
            "label": "Sender account",
            "description": "Account to use as sender of the emails (Do not include the @ and the domain).",
            "type": "text",
            "required": true
        },
        {
            "name": "domain",
            "label": "Sender domain",
            "description": "Domain to use as sender of the emails (Do not include the @ and the account name).",
            "type": "text",
            "required": true
        },
        {
            "name": "accountLabel",
            "label": "Account",
            "type": "label",
            "value": "(config.account ? config.account : '...')+'@'+(config.domain ? config.domain : '...')"
        },
        {
            "name": "webhook",
            "label": "Webhook URL",
            "type": "label",
            "value": "@config.WEBHOOK_URL"
        },
        {
            "name": "webhooksKey",
            "label": "Webhooks Key",
            "type": "text"
        },
        {
            "name": "redirectEnabled",
            "label": "Redirect Emails",
            "description": "If it is enabled, all the emails will be sent to the redirect address instead to the real ones. This parameter is available only in dev environments. Valid values 'enable', 'disable', and with placeholders ('Custom' option).",
            "type": "buttonsGroup",
            "required": true,
            "defaultValue": "disable",
            "typeOptions": {
                "allowCustom": true,
                "possibleValues":[
                    {
                        "label":"Enable",
                        "name":"enable"
                    },
                    {
                        "label":"Disable",
                        "name":"disable"
                    }
                ]
            }
        },
        {
            "name": "redirectEmail",
            "label": "Redirect To Address",
            "description": "Redirect address used as receiver of all the emails when the redirect option is enabled.",
            "type": "text",
            "visibility": "config.redirectEnabled && config.redirectEnabled != 'disable'"
        },
        {
            "name": "config",
            "label": "Configuration",
            "value": "<ul><li>Please, check the setting page to create a new API key: <a href='https://mandrillapp.com/settings/' target='_blank'>Settings page</a></li><li>Configure the inbound domain in order to receive messages and notifications: <a href='http://help.mandrill.com/entries/21699367-Inbound-Email-Processing-Overview' target='_blank'>Inbound Email Processing Overview</a></li><li>You will need to configure the Webhook URL as a route inside of the registered inbound domain: <a href='https://mandrillapp.com/inbound' target='_blank'>Inbound page</a>. </li><li>A new webhook (as well the one that we use as inbound webhook) can be configured to receive different kind of message and sync events: <a href='https://mandrillapp.com/settings/webhooks' target='_blank'>Webhooks page</a>. </li></ul>",
            "type": "info"
        }
    ]
}
